<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro de Aeronaves</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #1e1e1e;
            color: #f0f0f0;
            margin: 0;
            padding: 20px;
            text-align: center;
        }

        h1 {
            color: #b38b6d;
        }

        input, button {
            margin: 10px;
            padding: 10px;
            font-size: 1rem;
        }

        button {
            background-color: #b38b6d;
            color: white;
            border: none;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        button:hover {
            background-color: #8a6d50;
        }

        ul {
            list-style: none;
            padding: 0;
        }

        li {
            background: #333;
            margin: 5px;
            padding: 10px;
            border-radius: 5px;
        }

        #mensagem {
            margin: 10px 0;
            font-weight: bold;
        }

        .hidden {
            display: none;
        }

        #cookieBanner {
            background-color: #333;
            padding: 10px;
            position: fixed;
            bottom: 0;
            width: 100%;
        }

        #cookieBanner button {
            margin-left: 10px;
        }
    </style>
</head>
<body>
    <h1>Registro de Aeronaves</h1>

    <!-- Busca por Registro -->
    <input type="text" id="inputRegistro" placeholder="Digite o registro" autofocus>
    <button onclick="buscarRegistro()" aria-label="Buscar Registro de Aeronave">Buscar</button>

    <!-- Mensagem de Resultado -->
    <p id="mensagem"></p>

    <!-- Adicionar Registro -->
    <div id="adicionarRegistro" class="hidden">
        <input type="text" id="inputCompanhia" placeholder="Companhia">
        <input type="text" id="inputModelo" placeholder="Modelo da Aeronave">
        <button onclick="adicionarRegistro()">Adicionar Registro</button>
    </div>

    <!-- Lista de Registros -->
    <h2>Lista de Registros</h2>
    <ul id="listaRegistros"></ul>

    <!-- Banner de Cookies -->
    <div id="cookieBanner">
        <span>Este site utiliza cookies para melhorar sua experiência.</span>
        <button onclick="aceitarCookies()">Aceitar</button>
    </div>

    <!-- Script -->
    <script>
        // Inicialização
        let registros = JSON.parse(localStorage.getItem('registros')) || [];
        const mensagem = document.getElementById('mensagem');
        const listaRegistros = document.getElementById('listaRegistros');
        const divAdicionar = document.getElementById('adicionarRegistro');

        window.onload = () => {
            mostrarLista();
            verificarCookies();
        };

        // Função: Buscar Registro
        function buscarRegistro() {
            const input = document.getElementById('inputRegistro').value.toUpperCase().trim();
            if (!input) {
                alert("Por favor, digite um registro válido!");
                return;
            }

            const registroEncontrado = registros.find(r => r.registro === input);

            if (registroEncontrado) {
                mensagem.style.color = 'green';
                mensagem.textContent = `Registro encontrado: ${registroEncontrado.registro} - ${registroEncontrado.modelo} (${registroEncontrado.companhia})`;
                divAdicionar.classList.add('hidden');
            } else {
                mensagem.style.color = 'red';
                mensagem.textContent = 'Registro não encontrado. Deseja adicionar?';
                divAdicionar.classList.remove('hidden');
            }
        }

        // Função: Adicionar Registro
        function adicionarRegistro() {
            const registro = document.getElementById('inputRegistro').value.toUpperCase().trim();
            const companhia = document.getElementById('inputCompanhia').value.trim();
            const modelo = document.getElementById('inputModelo').value.trim();

            if (!registro || !companhia || !modelo) {
                alert("Por favor, preencha todos os campos!");
                return;
            }

            if (!registro.match(/^[A-Z]{2}-[A-Z0-9]{3}$/)) {
                alert("Formato inválido! Use o padrão XX-YYY.");
                return;
            }

            // Evitar duplicação
            if (registros.find(r => r.registro === registro)) {
                alert("Registro já existente!");
                return;
            }

            registros.push({ registro, companhia, modelo });
            localStorage.setItem('registros', JSON.stringify(registros));
            alert("Registro adicionado com sucesso!");

            // Resetar interface
            mensagem.textContent = '';
            divAdicionar.classList.add('hidden');
            document.getElementById('inputRegistro').value = '';
            document.getElementById('inputCompanhia').value = '';
            document.getElementById('inputModelo').value = '';

            mostrarLista();
        }

        // Função: Mostrar Lista de Registros
        function mostrarLista() {
            listaRegistros.innerHTML = '';
            registros.forEach(r => {
                const item = document.createElement('li');
                item.textContent = `${r.registro} - ${r.companhia} - ${r.modelo}`;
                listaRegistros.appendChild(item);
            });
        }

        // Função: Aceitar Cookies
        function aceitarCookies() {
            localStorage.setItem('cookiesAceitos', 'true');
            document.getElementById('cookieBanner').style.display = 'none';
        }

        function verificarCookies() {
            if (localStorage.getItem('cookiesAceitos')) {
                document.getElementById('cookieBanner').style.display = 'none';
            }
        }
    </script>
</body>
</html>
